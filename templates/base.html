<!-- 
Created by Matthew G Da Silva 06/03/2025

It is built around the base template of the CodeInsitute Boutique Ado project.

This is the base template for the website. It contains the header, footer and the main content block.
-->

{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
   {% block meta_tags %}
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta charset="utf-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1" />
   {% endblock %}

   {% block extra_meta %}
   {% endblock %}

   {% block core_css %}
   <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/310ea35e5d.js" crossorigin="anonymous"></script>
    {% endblock %}

    {% block extra_css %}
    {% endblock %}

    <!--Popper and Bootstrap JS scripts -->
    {% block core_js %}
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
      integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
      integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
      crossorigin="anonymous"
    ></script>
    {% endblock %}

    {% block extra_js %}
    {% endblock %}

    <title>Community Toolshed  {% block extra_title %}{% endblock %}</title>
  </head>
  <body>
    <header class="container-fluid px-0">
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="{% url 'homepage' %}">Community Toolshed</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="{% url 'homepage' %}">Home</a>
              </li>           
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="user-options" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                 My Account
                </a>
                <ul class="dropdown-menu" aria-labelledby="user-options">
                    {% if request.user.is_authenticated %}
                        {% if request.user.is_superuser %}                        
                        <li><a href="" class="dropdown-item">Product Management</a></li>                    
                        <li><hr class="dropdown-divider"></li>
                        {% endif %}
                    <li><a href="" class="dropdown-item">My Profile</a></li>
                    <a href="{% url 'account_logout' %}" class="dropdown-item">Logout</a>
                    {% else %}
                    <li><a href="{% url 'account_signup' %}" class="dropdown-item">Register</a></li>
                    <li><a href="{% url 'account_login' %}" class="dropdown-item">Login</a></li>
                    {% endif %}                                                            
                  </ul>               
              </li>
              <li class="nav-item">
                <a class="{% if grand_total %}text-info font-weight-bold{% else %}text-black{% endif %} nav-link" href="">
                  <div class="text-center">
                    <div><i class="fas fa-shopping-bag fa-lg"></i></div>
                    <p class="my-0">
                      {% if grand_total %}
                        £{{ grand_total|floatformat:2 }}
                      {% else %}
                        £0.00
                      {% endif %}
                    </p>
                  </div>
                </a>
              </li>
            </ul>
            <form class="d-flex" method="GET" action="">
              <input class="form-control me-2" type="search" placeholder="Search Our Site" aria-label="Search" name="q">
              <button class="btn btn-outline-success" type="submit">Search</button>
            </form>            
          </div>
        </div>
      </nav>
    </header>    

    {% if messages %}
    <div class="message-container"></div>
    {% endif %}

    {% block page_header %}
    {% endblock %}

    {% block content %}
    {% endblock %}

    {% block postload_js %}
    {% endblock %}
  </body>
</html>
